<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>🎰 Casino Offers</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>🎰 Casino Offers</h1>
  <div class="swiper mySwiper">
    <div class="swiper-wrapper" id="offersContainer">Loading...</div>
  </div>

  <p class="note">🔞 18+ only. For entertainment. Play responsibly.</p>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    async function fetchOffers() {
      const userData = await fetch("https://ipapi.co/json").then(res => res.json()).catch(() => ({ country_code: 'GLOBAL' }));
      const userCountry = userData.country_code || "GLOBAL";

      const response = await fetch("offers.json");
      const offers = await response.json();

      const visibleOffers = offers.filter(o => o.country === "GLOBAL" || o.country === userCountry);
      const container = document.getElementById("offersContainer");
      container.innerHTML = '';

      visibleOffers.forEach(offer => {
        const trackingUrl = `${offer.url}?ref=affiliate123&utm_country=${userCountry}&utm_campaign=casino`;

        const flag = offer.country === "GLOBAL"
          ? '🌐'
          : `<img src="https://flagcdn.com/24x18/${offer.country.toLowerCase()}.png" alt="${offer.country}" />`;

        container.innerHTML += `
          <div class="swiper-slide">
            <div class="card">
              <img src="${offer.img}" alt="${offer.title}" class="offer-img" />
              <h3>${offer.title}</h3>
              <p class="flag">${flag} ${offer.country === userCountry ? 'Available in your country' : 'Global Offer'}</p>
              <a href="${trackingUrl}" target="_blank">Play Now</a>
            </div>
          </div>
        `;
      });

      new Swiper(".mySwiper", {
        slidesPerView: 1.2,
        spaceBetween: 15,
        centeredSlides: true,
        loop: true
      });
    }

    fetchOffers();
  </script>
</body>
</html>
